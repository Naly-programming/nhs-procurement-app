import JSZip from 'jszip'

interface StepData {
  company_name?: string
  website?: string
  product_desc?: string
  used_in_nhs?: boolean
  has_data_policy?: boolean
  has_ico_registration?: boolean
  is_dsp_toolkit_compliant?: boolean
}

export async function generateMarkdownZip(data: StepData): Promise<Blob> {
  const zip = new JSZip()

  const markdownContent = `# NHS Procurement Readiness Report

## Basic Company Info
- **Company Name:** ${data.company_name || '—'}
- **Website:** ${data.website || '—'}

## Product Details
- **Product Description:** ${data.product_desc || '—'}
- **Used in NHS Before:** ${data.used_in_nhs ? 'Yes' : 'No'}

## Compliance Checklist
- **Data Protection Policy:** ${data.has_data_policy ? 'Yes' : 'No'}
- **ICO Registered:** ${data.has_ico_registration ? 'Yes' : 'No'}
- **DSP Toolkit Compliant:** ${data.is_dsp_toolkit_compliant ? 'Yes' : 'No'}

---

*Generated by Coentry Platform*
`

  zip.file('nhs-procurement-readiness.md', markdownContent)

  const blob = await zip.generateAsync({ type: 'blob' })
  return blob
}
