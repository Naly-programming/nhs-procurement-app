import JSZip from 'jszip'

type IntakeStepData = {
  company_name?: string
  website?: string
  product_desc?: string
  used_in_nhs?: boolean
}

export const generateMarkdownZip = async (data: IntakeStepData): Promise<Blob> => {
  const zip = new JSZip()
  const markdownContent = `
# NHS Procurement Readiness Report

## Company Information
- **Company Name**: ${data.company_name || '—'}
- **Website**: ${data.website || '—'}

## Product Details
- **Description**:  
${data.product_desc || '—'}

- **Used in NHS Before**: ${data.used_in_nhs ? 'Yes' : 'No'}

---

*Generated by NHS Ready Platform*
  `.trim()

  zip.file('procurement-readiness.md', markdownContent)
  const blob = await zip.generateAsync({ type: 'blob' })
  return blob
}
